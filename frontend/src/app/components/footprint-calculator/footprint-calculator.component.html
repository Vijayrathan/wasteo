<div class="calculator-container">
  <div class="calculator-header">
    <h1><i class="fas fa-calculator"></i> Carbon Footprint Calculator</h1>
    <p>Measure your environmental impact and find ways to reduce it</p>
  </div>

  <div class="calculator-card">
    <!-- Form Section -->
    <form [formGroup]="calculatorForm" (ngSubmit)="calculateFootprint()">
      <!-- Transportation Section -->
      <div class="section-card" formGroupName="transportation">
        <div class="section-header">
          <h2><i class="fas fa-car"></i> Transportation</h2>
          <p>Track your weekly travel habits</p>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="carKm">Car Travel (km/week)</label>
            <input
              type="number"
              id="carKm"
              formControlName="carKm"
              class="form-control"
              min="0"
            />
          </div>

          <div class="form-group">
            <label for="busKm">Bus Travel (km/week)</label>
            <input
              type="number"
              id="busKm"
              formControlName="busKm"
              class="form-control"
              min="0"
            />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="trainKm">Train Travel (km/week)</label>
            <input
              type="number"
              id="trainKm"
              formControlName="trainKm"
              class="form-control"
              min="0"
            />
          </div>

          <div class="form-group">
            <label for="planeKm">Air Travel (km/month)</label>
            <input
              type="number"
              id="planeKm"
              formControlName="planeKm"
              class="form-control"
              min="0"
            />
          </div>
        </div>
      </div>

      <!-- Home Energy Section -->
      <div class="section-card" formGroupName="home">
        <div class="section-header">
          <h2><i class="fas fa-home"></i> Home Energy</h2>
          <p>Track your monthly energy consumption</p>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="electricityKwh">Electricity (kWh/month)</label>
            <input
              type="number"
              id="electricityKwh"
              formControlName="electricityKwh"
              class="form-control"
              min="0"
            />
          </div>

          <div class="form-group">
            <label for="gasKwh">Natural Gas (kWh/month)</label>
            <input
              type="number"
              id="gasKwh"
              formControlName="gasKwh"
              class="form-control"
              min="0"
            />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="oilLiters">Oil (liters/month)</label>
            <input
              type="number"
              id="oilLiters"
              formControlName="oilLiters"
              class="form-control"
              min="0"
            />
          </div>
        </div>
      </div>

      <!-- Food Section -->
      <div class="section-card" formGroupName="food">
        <div class="section-header">
          <h2><i class="fas fa-utensils"></i> Food</h2>
          <p>Track your weekly diet</p>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="meatMeals">Meat Meals (per week)</label>
            <input
              type="number"
              id="meatMeals"
              formControlName="meatMeals"
              class="form-control"
              min="0"
            />
          </div>

          <div class="form-group">
            <label for="vegetarianMeals">Vegetarian Meals (per week)</label>
            <input
              type="number"
              id="vegetarianMeals"
              formControlName="vegetarianMeals"
              class="form-control"
              min="0"
            />
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="veganMeals">Vegan Meals (per week)</label>
            <input
              type="number"
              id="veganMeals"
              formControlName="veganMeals"
              class="form-control"
              min="0"
            />
          </div>
        </div>
      </div>

      <!-- Form Actions -->
      <div class="calculator-actions">
        <button
          type="button"
          class="btn btn-outline-secondary"
          (click)="resetCalculator()"
        >
          Reset
        </button>
        <button
          type="submit"
          class="btn btn-primary"
          [disabled]="calculatorForm.invalid || loading"
        >
          <span
            *ngIf="loading"
            class="spinner-border spinner-border-sm me-2"
            role="status"
            aria-hidden="true"
          ></span>
          Calculate Footprint
        </button>
      </div>
    </form>

    <!-- Results Section -->
    <div class="results-section" *ngIf="showResults">
      <div class="section-header">
        <h2><i class="fas fa-chart-pie"></i> Your Carbon Footprint</h2>
      </div>

      <div class="result-card">
        <div class="carbon-result">
          <div class="result-value">
            {{ carbonFootprint | number : "1.1-1" }}
          </div>
          <div class="result-unit">kg CO₂e</div>
        </div>

        <div class="result-comparisons">
          <div class="comparison-item">
            <i class="fas fa-tree"></i>
            <div class="comparison-text">
              <span class="comparison-value">{{ comparisonStats.trees }}</span>
              trees needed to absorb this CO₂ in one year
            </div>
          </div>

          <div class="comparison-item">
            <i class="fas fa-plane"></i>
            <div class="comparison-text">
              <span class="comparison-value">{{
                comparisonStats.flights
              }}</span>
              flight(s) from London to New York
            </div>
          </div>

          <div class="comparison-item">
            <i class="fas fa-car"></i>
            <div class="comparison-text">
              <span class="comparison-value">{{
                comparisonStats.driving
              }}</span>
              days of average car use
            </div>
          </div>
        </div>

        <div class="reduction-tips">
          <h3>Tips to Reduce Your Carbon Footprint:</h3>
          <ul>
            <li>Consider using public transportation more frequently</li>
            <li>
              Reduce meat consumption by incorporating more plant-based meals
            </li>
            <li>Turn off electronics and appliances when not in use</li>
            <li>Add home insulation to reduce heating/cooling needs</li>
            <li>
              Switch to renewable energy sources if available in your area
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
</div>
